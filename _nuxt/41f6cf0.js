(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{215:function(t,e,r){"use strict";r.r(e);r(33);var n=r(6),c=r(58),o={name:"article-component",props:{article:{type:Array,default:function(){return[]},required:!0}},data:function(){return{isFetching:!1}},methods:{onAddFav:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.article[t],o=n.slug,l=n.favorited,f=n.favoritesCount,e.article[t].favorited=!l,e.article[t].favoritesCount=l?f-1:f+1,e.isFetching=!0,!l){r.next=9;break}return r.next=7,Object(c.e)(o);case 7:r.next=11;break;case 9:return r.next=11,Object(c.b)(o);case 11:e.isFetching=!1;case 12:case"end":return r.stop()}}),r)})))()}}},l=r(14),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.article,(function(e,n){return r("div",{key:n,staticClass:"article-preview"},[r("div",{staticClass:"article-meta"},[r("NuxtLink",{attrs:{to:{name:"profile",params:{username:e.author.username}}}},[r("img",{attrs:{src:e.author.image}})]),t._v(" "),r("div",{staticClass:"info"},[r("NuxtLink",{staticClass:"author",attrs:{to:{name:"profile",params:{username:e.author.username}}}},[t._v(t._s(e.author.username))]),t._v(" "),r("span",{staticClass:"date"},[t._v(t._s(e.createdAt))])],1),t._v(" "),r("button",{staticClass:"btn btn-outline-primary btn-sm pull-xs-right",attrs:{disabled:t.isFetching},on:{click:function(e){return t.onAddFav(n)}}},[r("i",{staticClass:"ion-heart"}),t._v(" "+t._s(e.favoritesCount)+"\n      ")])],1),t._v(" "),r("NuxtLink",{staticClass:"preview-link",attrs:{to:{name:"article",params:{slug:e.slug}}}},[r("h1",[t._v(t._s(e.title))]),t._v(" "),r("p",[t._v(t._s(e.body))]),t._v(" "),r("span",[t._v("Read more...")])])],1)})),0)}),[],!1,null,null,null);e.default=component.exports},232:function(t,e,r){"use strict";r.r(e);r(10),r(47),r(59);var n=r(45),c=(r(33),r(6)),o=r(26),l=r(24),article=r(215),f=r(58);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var m={name:"profile",middleware:"router",computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.e)(["userInfo"])),components:{Article:article.default},data:function(){return{profile:{},isMe:!0,isFetching:!1,articles:[],myArticles:[],othersArticle:[],isActive:!1}},created:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,c,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.$route.params.username,Promise.all([Object(f.i)({author:r}),Object(f.j)(r)]).then((function(e){var r=Object(n.a)(e,2),c=r[0],o=r[1].data.profile,l=c.data.articles;t.profile=o,t.articles=l,t.myArticles=l,t.userInfo.username!==o.username&&(t.isMe=!1)})),"others"!==t.$route.query.type){e.next=10;break}return t.isActive=!0,e.next=6,Object(f.i)({favorited:t.profile.username});case 6:c=e.sent,data=c.data,t.othersArticle=data.articles,t.articles=data.articles;case 10:case"end":return e.stop()}}),e)})))()},watch:{$route:"onWatchRouter"},methods:{onSetting:function(){this.$router.push({name:"setting"})},onWatchRouter:function(t,e){var r=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,data,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.othersArticle.length){e.next=7;break}return e.next=3,Object(f.i)({favorited:r.profile.username});case 3:n=e.sent,data=n.data,r.othersArticle=data.articles,r.articles=data.articles;case 7:"others"===(c=t.query.type)||""===c?(r.articles=r.othersArticle,r.isActive=!0):(r.articles=r.myArticles,r.isActive=!1);case 9:case"end":return e.stop()}}),e)})))()},onFollow:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.profile.username,t.isFetching=!0,!t.profile.following){e.next=8;break}return e.next=5,Object(f.n)(r);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,Object(f.f)(r);case 10:e.t0=e.sent;case 11:n=e.t0,data=n.data,t.isFetching=!1,t.profile=data.profile;case 15:case"end":return e.stop()}}),e)})))()}}},d=r(14),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"profile-page"},[r("div",{staticClass:"user-info"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("img",{staticClass:"user-img",attrs:{src:t.profile.image}}),t._v(" "),r("h4",[t._v(t._s(t.profile.username))]),t._v(" "),r("p",[t._v("\n            "+t._s(t.profile.bio)+"\n          ")]),t._v(" "),t.isMe?r("button",{staticClass:"btn btn-sm btn-outline-secondary action-btn",on:{click:t.onSetting}},[r("i",{staticClass:"ion-plus-round"}),t._v("\n              Edit Profile Settings\n          ")]):r("button",{staticClass:"btn btn-sm btn-outline-secondary action-btn",attrs:{disabled:t.isFetching},on:{click:t.onFollow}},[t.profile.following?[r("i",{staticClass:"ion-plus-round"}),t._v("\n                UnFollow "+t._s(t.profile.username)+"\n            ")]:[r("i",{staticClass:"ion-plus-round"}),t._v("\n                Follow "+t._s(t.profile.username)+"\n            ")]],2)])])])]),t._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("div",{staticClass:"articles-toggle"},[r("ul",{staticClass:"nav nav-pills outline-active"},[r("li",{staticClass:"nav-item"},[r("NuxtLink",{class:"nav-link "+(t.isActive?"":"active"),attrs:{to:{path:"/profile/"+t.profile.username,query:{type:"my"}}}},[t._v("My Articles")])],1),t._v(" "),r("li",{staticClass:"nav-item"},[r("NuxtLink",{class:"nav-link "+(t.isActive?"active":""),attrs:{to:{path:"/profile/"+t.profile.username,query:{type:"others"}}}},[t._v("Favorited Articles")])],1)])]),t._v(" "),r("Article",{attrs:{article:t.articles}})],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Article:r(215).default})}}]);